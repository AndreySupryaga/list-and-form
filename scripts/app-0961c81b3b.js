!function(){"use strict";angular.module("app",["ngAnimate","ui.bootstrap","ngRoute","toastr","ngMessages"])}(),function(){"use strict";angular.module("app").service("userEditDialog",["$uibModal",function(e){return function(t){var s=e.open({templateUrl:"app/services/dialog/userEdit/user.edit.dialog.html",controller:["$scope",function(e){e.userModel=angular.copy(t),e.ok=function(){angular.equals(t,e.userModel)?s.close():s.close(e.userModel)},e.cancel=function(){s.dismiss("cancel")}}]});return s.result}}])}(),function(){"use strict";angular.module("app").service("confirmDialog",["$uibModal",function(e){return function(t,s){var r=e.open({templateUrl:"app/services/dialog/confirm/confirm.dialog.html",controller:["$scope",function(e){e.title=t,e.descr=s,e.ok=function(){r.close()},e.cancel=function(){r.dismiss("cancel")}}]});return r.result}}])}(),function(){"use strict";function e(e,t,s,r){function a(t){var a="Delete user",n="You really want to delete "+t.firstName+" "+t.lastName;r(a,n).then(function(){s.del(t.id).then(function(t){e.userModel=t,o()})})}function o(){var s;if(e.ageRange){var r=e.ageRange.split("-");r=r[1]?r:e.ageRange.split("+"),s=t("rangeFilter")(e.userModel,r[0],r[1])}return s=t("filter")(s,e.searchTerm),s=t("orderBy")(s,e.sortType,e.sortReverse),e.pagesLength=s.length,s=t("limitTo")(s,e.limit,1===e.currentPage?0:(e.currentPage-1)*e.limit),e.userList=s,e.userList}e.limit="10",e.currentPage="1",e.ageRange="all",e.userModel=[],e.userDelete=a,s.getAll().then(function(t){e.userModel=t,o(),e.loader=!1}),e.$watch("[currentPage, limit, sortReverse, searchTerm, ageRange]",function(){o()},!0)}e.$inject=["$scope","$filter","usersApi","confirmDialog"],angular.module("app").controller("usersGridCtrl",e)}(),function(){"use strict";function e(e,t,s,r,a,o){function n(){t.current.params.id?(e.userId=t.current.params.id,e.formTitle="Edit user",l()):(e.formTitle="Add user",e.loader=!1)}function l(){return a.get(e.userId).then(function(t){e.userModel=t,m=angular.copy(e.userModel),e.loader=!1})}function i(t){a.put(t).then(function(t){e.userModel=t,m=angular.copy(e.userModel),e.userForm.$setPristine()})}function u(e){a.post(e).then(function(e){r.path("/user/edit/"+e.id)})}function c(e){var t="Delete user",r="You really want to delete "+e.firstName+" "+e.lastName;o(t,r).then(function(){a.del(e.id),s.history.back()})}function d(){e.userModel=m}function p(){s.history.back()}var m=null;e.users=[],e.userModel={},e.userAdd=u,e.userEdit=i,e.userDelete=c,e.resetChanges=d,e.cancelForm=p,n()}e.$inject=["$scope","$route","$window","$location","usersApi","confirmDialog"],angular.module("app").controller("userFormCtrl",e)}(),function(){"use strict";angular.module("app").directive("navMenu",function(){return{controller:["$scope","$location","navMenuStructure",function(e,t,s){e.currentPath="/#"+t.path(),e.links=s,e.selectSection=function(t){e.currentPath=t}}],restrict:"AE",templateUrl:"app/directive/menu/nav.menu.html"}})}(),function(){"use strict";angular.module("app").filter("rangeFilter",function(){return function(e,t,s){var r=[];if(t=parseInt(t),s=parseInt(s)||Number.MAX_VALUE,t){for(var a=0;a<e.length;a++)e[a].age>=t&&e[a].age<=s&&r.push(e[a]);return r}return e}})}(),function(){"use strict";angular.module("app").value("navMenuStructure",[{title:"Item table view",href:"/#/users/table"},{title:"Item tile view",href:"/#/users/tile"},{title:"Add user",href:"/#/user/add"}])}(),function(){"use strict";angular.module("app").config(["$routeProvider",function(e){e.when("/users/table",{templateUrl:"app/components/user/grid/table/users.table.html",controller:"usersGridCtrl"}).when("/users/tile",{templateUrl:"app/components/user/grid/tile/users.tile.html",controller:"usersGridCtrl"}).when("/user/edit/:id",{templateUrl:"app/components/user/form/user.form.html",controller:"userFormCtrl"}).when("/user/add",{templateUrl:"app/components/user/form/user.form.html",controller:"userFormCtrl"}).otherwise({redirectTo:"/users/table"})}])}(),function(){"use strict";angular.module("app").service("usersApi",["$http","$q","toastr",function(e,t,s){function r(){return JSON.parse(localStorage.getItem("usersModel"))}function a(e){return localStorage.setItem("usersModel",JSON.stringify(e)),r()}function o(e){var t=r();return t[n(e)]}function n(e){for(var t=r(),s=0;s<t.length;s++)if(t[s].id==e)return s}function l(e){for(var t=0,s=0;s<e.length;s++)t<e[s].id&&(t=e[s].id);return t}return{getAll:function(){return r()?t(function(e){e(r())}):e.get("app/backend/userList.json").then(function(e){return a(e.data),e.data})},get:function(e){var s=this;return t(function(t){return r()?void t(o(e)):s.getAll().then(function(){t(o(e))})})},post:function(e){var o=r();return e.id=l(o)+1,o.push(e),a(o),t(function(t){s.success("Created new user","Success"),t(e)})},put:function(e){var o=r();return o[n(e.id)]=e,a(o),t(function(t){s.success("Updated","Success"),t(e)})},del:function(e){n(e);var o=r();return o.splice(n(e),1),a(o),t(function(e){s.success("Deleted","Success"),e(o)})}}}])}(),function(){"use strict";function e(e){e.loader=!0}e.$inject=["$rootScope"],angular.module("app").run(e)}(),function(){"use strict";function e(e,t,s){s.html5Mode(!0),t.options({popupDelay:400}),e.allowHtml=!0,e.timeOut=3e3,e.positionClass="toast-bottom-right",e.progressBar=!0}e.$inject=["toastrConfig","$uibTooltipProvider","$locationProvider"],angular.module("app").config(e)}(),angular.module("app").run(["$templateCache",function(e){e.put("app/directive/menu/nav.menu.html",'<nav class="navbar navbar-default navbar-fixed-top" role=navigation><div class=navbar-header><button type=button class=navbar-toggle ng-click="isNavCollapsed = !isNavCollapsed"><span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span></button> <a href=https://github.com/AndreySupryaga/list-and-form class=navbar-brand>View on GitHub</a></div><div class="collapse navbar-collapse" uib-collapse=isNavCollapsed><ul class="nav navbar-nav"><li ng-repeat="link in links track by $index"><a ng-href={{::link.href}} ng-click=selectSection(link.href) ng-class="{\'active\' : link.href === currentPath}">{{::link.title}}</a></li></ul></div></nav>'),e.put("app/components/user/form/user.form.html",'<div class=container><div class=loader-container ng-show=loader><div class=loader></div></div><div class=row><div class="col-md-6 col-md-offset-3"><div class="panel panel-default"><div class=panel-heading><h3 class=panel-title>{{::formTitle}}</h3></div><div class=panel-body><form class=form-horizontal name=userForm><div class=form-group><label for=firstName class="col-sm-4 control-label">First Name</label><div class=col-sm-8><input ng-model=userModel.firstName name=firstName class=form-control id=firstName placeholder="First Name" required><div ng-messages=userForm.firstName.$error ng-if=userForm.firstName.$dirty><div ng-message=required>This field is required</div></div></div></div><div class=form-group><label for=lastName class="col-sm-4 control-label">Last Name</label><div class=col-sm-8><input ng-model=userModel.lastName name=lastName class=form-control id=lastName placeholder="Last Name" required><div ng-messages=userForm.lastName.$error ng-if=userForm.lastName.$dirty><div ng-message=required>This field is required</div></div></div></div><div class=form-group><label for=email class="col-sm-4 control-label">Email address</label><div class=col-sm-8><input ng-model=userModel.email name=email type=email class=form-control id=email placeholder="Email address" required><div ng-messages=userForm.email.$error ng-if=userForm.email.$dirty><div ng-message=required>This field is required</div><div ng-message=email>Your email address is invalid</div></div></div></div><div class=form-group><label for=age class="col-sm-4 control-label">Age</label><div class=col-sm-8><input ng-model=userModel.age name=age type=number class=form-control id=age placeholder=Age required><div ng-messages=userForm.age.$error ng-if=userForm.age.$dirty><div ng-message=required>This field is required</div></div></div></div><div class="form-group text-center"><span ng-if=userId><button ng-click=userDelete(userModel) type=button class="btn btn-danger">Delete</button> <button ng-click=userEdit(userModel) ng-disabled="userForm.$invalid || userForm.$pristine" class="btn btn-success">Save changes</button> <button ng-click=resetChanges() ng-disabled="userForm.$invalid || userForm.$pristine" type=button class="btn btn-warning">Reset changes</button> </span><button ng-if=!userId ng-click=userAdd(userModel) ng-disabled="userForm.$invalid || userForm.$pristine" type=button class="btn btn-success">Save changes</button> <button ng-click=cancelForm() type=button class="btn bt n-default">Cancel</button></div></form></div></div></div></div></div>'),e.put("app/services/dialog/confirm/confirm.dialog.html",'<div class=modal-header><h3 class=modal-title>{{title}}</h3></div><div class=modal-body>{{descr}}</div><div class=modal-footer><button class="btn btn-primary" type=button ng-click=ok()>OK</button> <button class="btn btn-warning" type=button ng-click=cancel()>Cancel</button></div>'),e.put("app/services/dialog/userEdit/user.edit.dialog.html",'<div class=modal-header><h3 class=modal-title>Edit item</h3></div><div class=modal-body><form><div class=form-group><label for=firstName>First Name</label><input ng-model=userModel.firstName class=form-control id=firstName placeholder="First Name"></div><div class=form-group><label for=lastName>Last Name</label><input ng-model=userModel.lastName class=form-control id=lastName placeholder="Last Name"></div><div class=form-group><label for=email>Email address</label><input ng-model=userModel.email class=form-control id=email placeholder=Email></div><div class=form-group><label for=age>Age</label><input ng-model=userModel.age class=form-control id=age placeholder=Age type=number></div></form></div><div class=modal-footer><button class="btn btn-primary" type=button ng-click=ok()>OK</button> <button class="btn btn-warning" type=button ng-click=cancel()>Cancel</button></div>'),e.put("app/components/user/grid/table/users.table.html",'<div><div class=loader-container ng-show=loader><div class=loader></div></div><div class=container><div class=row><div class=pull-right><ul uib-pagination total-items=pagesLength items-per-page=limit ng-model=currentPage max-size=maxSize class=pagination-sm boundary-links=true></ul></div><div class="pull-right limit-select"><select ng-model=limit class=form-control><option value=5>5</option><option value=10>10</option><option value=25>25</option><option value=all>all</option></select></div></div></div><div class=container><table class="table table-bordered table-striped"><thead><tr><th ng-click="sortType = \'firstName\'; sortReverse = !sortReverse">First Name <span ng-show="sortType == \'firstName\' && !sortReverse">+</span> <span ng-show="sortType == \'firstName\' && sortReverse">-</span></th><th ng-click="sortType = \'lastName\'; sortReverse = !sortReverse">Last Name <span ng-show="sortType == \'lastName\' && !sortReverse">+</span> <span ng-show="sortType == \'lastName\' && sortReverse">-</span></th><th ng-click="sortType = \'email\'; sortReverse = !sortReverse">Email <span ng-show="sortType == \'email\' && !sortReverse">+</span> <span ng-show="sortType == \'email\' && sortReverse">-</span></th><th ng-click="sortType = \'age\'; sortReverse = !sortReverse">Age <span ng-show="sortType == \'age\' && !sortReverse">+</span> <span ng-show="sortType == \'age\' && sortReverse">-</span></th><th></th></tr></thead><tbody><tr><td><input ng-model=searchTerm.firstName class=form-control></td><td><input ng-model=searchTerm.lastName class=form-control></td><td><input ng-model=searchTerm.email class=form-control></td><td style="width: 120px"><select ng-model=ageRange class=form-control><option value=10-20>10-20</option><option value=21-30>21-30</option><option value=31-40>31-40</option><option value=40+>40+</option><option value=all>all</option></select></td><td></td></tr><tr ng-repeat="user in userList"><td><a ng-href=/#/user/edit/{{::user.id}}>{{::user.firstName}}</a></td><td>{{::user.lastName}}</td><td>{{::user.email}}</td><td>{{::user.age}}</td><td><a class="btn btn-info btn-circle" ng-href=/#/user/edit/{{::user.id}} uib-tooltip=Edit>e</a> <button class="btn btn-danger btn-circle" ng-click=userDelete(user) uib-tooltip=Remove>d</button></td></tr></tbody></table></div></div>'),e.put("app/components/user/grid/tile/users.tile.html",'<div><div class=loader-container ng-show=loader><div class=loader></div></div><div class=container><div class=row><div class=pull-right><ul uib-pagination total-items=pagesLength items-per-page=limit ng-model=currentPage max-size=maxSize class=pagination-sm boundary-links=true></ul></div><div class="pull-right limit-select"><select ng-model=limit class=form-control><option value=5>5</option><option value=10>10</option><option value=25>25</option><option value=all>all</option></select></div></div></div><div class=container><table class="table table-bordered table-striped"><thead><tr><th ng-click="sortType = \'firstName\'; sortReverse = !sortReverse">First Name <span ng-show="sortType == \'firstName\' && !sortReverse">+</span> <span ng-show="sortType == \'firstName\' && sortReverse">-</span></th><th ng-click="sortType = \'lastName\'; sortReverse = !sortReverse">Last Name <span ng-show="sortType == \'lastName\' && !sortReverse">+</span> <span ng-show="sortType == \'lastName\' && sortReverse">-</span></th><th ng-click="sortType = \'email\'; sortReverse = !sortReverse">Email <span ng-show="sortType == \'email\' && !sortReverse">+</span> <span ng-show="sortType == \'email\' && sortReverse">-</span></th><th ng-click="sortType = \'age\'; sortReverse = !sortReverse">Age <span ng-show="sortType == \'age\' && !sortReverse">+</span> <span ng-show="sortType == \'age\' && sortReverse">-</span></th><th></th></tr></thead><tbody><tr><td><input ng-model=searchTerm.firstName class=form-control></td><td><input ng-model=searchTerm.lastName class=form-control></td><td><input ng-model=searchTerm.email class=form-control></td><td style="width: 120px"><select ng-model=ageRange class=form-control><option value=10-20>10-20</option><option value=21-30>21-30</option><option value=31-40>31-40</option><option value=40+>40+</option><option value=all>all</option></select></td><td></td></tr></tbody></table></div><div class=container><div class=row><div class="col-sm-4 col-md-3" ng-repeat="user in userList"><div class=thumbnail><img src=# alt=...><div class=caption><h3><a ng-href=/#/user/edit/{{::user.id}}>{{user.firstName}}<br>{{user.lastName}}</a></h3><p>{{::user.email}}</p><p>{{::user.age}}</p><p><a ng-href=/#/user/edit/{{::user.id}} class="btn btn-primary" role=button>Edit</a> <button ng-click=userDelete(user) class="btn btn-danger" role=button>Delete</button></p></div></div></div></div></div></div>')}]);
//# sourceMappingURL=../maps/scripts/app-0961c81b3b.js.map
